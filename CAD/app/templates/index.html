<!doctype html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <title>PCB CAD Placement Demo</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
<div class="container">
    <h1>Размещение элементов (мини-CAD)</h1>

    <div class="top-row">
        <!-- Поле размещения -->
        <div class="panel">
            <h2>Коммутационное поле</h2>
            <canvas id="boardCanvas"></canvas>
            <div class="ga-info">
                <div>Fitness: <span id="fitnessValue">—</span></div>
                <div>Σ длина: <span id="totalLengthValue">—</span></div>
                <div>max длина: <span id="maxLengthValue">—</span></div>
            </div>
        </div>

        <!-- Правая панель -->
        <div class="panel control-panel">
            <h2>Классы, элементы и связи</h2>

            <div class="block">
                <h3>Классы компонентов</h3>
                <ul id="templatesList"></ul>
            </div>

            <div class="block">
                <h3>Экземпляры (элементы)</h3>
                <div class="form-row">
                    <label>Класс</label>
                    <select id="templateSelect"></select>
                </div>
                <div class="form-row">
                    <label>Имя элемента</label>
                    <input type="text" id="elementName" placeholder="R1, R2, U1...">
                </div>
                <button id="addElementBtn">Добавить элемент</button>
                <ul id="elementsList"></ul>
            </div>

            <div class="block">
                <h3>Связи</h3>
                <div class="form-row">
                    <label>От</label>
                    <select id="connFrom"></select>
                </div>
                <div class="form-row">
                    <label>К</label>
                    <select id="connTo"></select>
                </div>
                <button id="addConnectionBtn">Добавить связь</button>
                <ul id="connectionsList"></ul>
            </div>

            <div class="block">
                <h3>Оптимизация размещения</h3>
                <div class="form-row">
                    <label>Шагов (последов.) / поколений (ГА)</label>
                    <input type="number" id="steps" value="2000">
                </div>
                <div class="form-row">
                    <label>Популяция (ГА)</label>
                    <input type="number" id="popSize" value="40">
                </div>
                <div class="form-row">
                    <label>P<sub>crossover</sub> (ГА)</label>
                    <input type="number" step="0.01" id="pcross" value="0.8">
                </div>
                <div class="form-row">
                    <label>P<sub>mutation</sub> (ГА)</label>
                    <input type="number" step="0.01" id="pmut" value="0.05">
                </div>
                <div class="form-row">
                    <label>α</label>
                    <input type="number" step="0.1" id="alpha" value="0.5">
                </div>
                <div class="form-row">
                    <label>β</label>
                    <input type="number" step="0.1" id="beta" value="0.5">
                </div>
                <div class="buttons-row">
                    <button id="runSeqBtn">Последовательный алгоритм</button>
                    <button id="runGaBtn">Параллельный ГА</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Конструктор класса компонента -->
    <div class="bottom-row panel">
        <h2>Конструктор класса компонента (рисование по точкам)</h2>
        <div class="constructor-row">
            <canvas id="componentCanvas"></canvas>
            <div class="constructor-controls">
                <div class="form-row">
                    <label>Имя класса</label>
                    <input type="text" id="compName" placeholder="Resistor, IC, Transistor...">
                </div>
                <div class="form-row">
                    <label>Ширина (в позициях)</label>
                    <input type="number" id="compCellsX" value="1" min="1">
                </div>
                <div class="form-row">
                    <label>Высота (в позициях)</label>
                    <input type="number" id="compCellsY" value="1" min="1">
                </div>
                <p class="hint">
                    Кликни по холсту, чтобы ставить точки. Линии автоматически соединяют точки.
                    «Завершить» замыкает многоугольник.
                </p>
                <button id="finishComponentBtn">Завершить класс</button>
                <button id="saveComponentBtn">Сохранить класс</button>
                <button id="clearComponentBtn">Очистить</button>
                <p>Точек: <span id="pointsCount">0</span></p>
            </div>
        </div>
    </div>
</div>

<script src="/static/app.js"></script>
</body>
</html>
